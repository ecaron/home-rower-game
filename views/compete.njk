{% extends "template.njk" %}

{% block content %}
  <div class="row">
    <div id="water" style="position:absolute;border:1px solid black;top:0;bottom:0;left:0;right:50%;background-image:url('/images/water2.gif')">
      <div id="starting-line"></div>
      <div id="rower">
        <div class="avatar" data-details="{{ rower.avatar | dump }}"></div>
        <div class="stats"></div>
      </div>
      <div id="competitor">
        <div class="avatar {% if rower.name == competitor.name %}ghost{% endif %}" data-details="{{ competitor.avatar | dump }}"></div>
        <div class="stats"></div>
      </div>
    </div>
    <div style="position:absolute;right:10px;bottom:10px;display:none" class="toggles">
      <button class="btn-large grey lighten-3 black-text" id="endRace">END RACE</button>
      <!--
      <a href="#" id="logout" class="btn-small grey lighten-3 black-text">Logout</a>&nbsp;
      -->
    </div>
    <div class="col s6 offset-s6">
      <div class="section">
        <div class="row">
          <div class="col s12">
            <h2>{{ rower.name }} vs {{ competitor.name }}</h2>
            <div class="divider"></div>
            <blockquote id="timer"><h4>
              {% if competitor.record %}
                <strong>Race Date</strong>: <span id="recordDate" data-value="{{ competitor.record.start }}"></span><br>
                <strong>Duration</strong> <span id="recordDuration" data-value="{{ competitor.record.duration }}"></span><br>
                <strong>Distance</strong> <span id="recordDistance" data-value="{{ competitor.record.distance }}"></span><br>
                <strong>Max Speed</strong> {{ competitor.record.maxSpeed }} knots
              {% endif %}
            </h4></blockquote>
          </div>
          <div class="col s12">
            <button class="btn-large left" id="startRace">START</button>
            <a href="/" class="btn-large grey right" id="cancelRace">CANCEL</a>
            <div class="toggles" style="display:none">
              <!--
                <button class="btn-large" id="speedUp">SPEED UP</button>
                <button class="btn-large" id="speedDown">SPEED DOWN</button>
              -->
            </div>
            <div id="messages"></div>
            <div id="graphs"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block footer %}
  <script src="/chart/Chart.bundle.min.js"></script>
  <script src="/charts.js"></script>
  <script src="/compete.js"></script>
{% endblock %}
